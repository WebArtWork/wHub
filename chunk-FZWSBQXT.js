import{f as P}from"./chunk-U3KN5ZBC.js";import"./chunk-ND64TP5W.js";import"./chunk-5QEYZB4X.js";import{Cb as w,J as m,K as f,Kb as I,L as _,Nb as j,X as v,_ as y,_a as b,cb as g,mb as k,nb as a,q as u,r as d,t as h,ub as C}from"./chunk-RUQ45WKZ.js";var x={formId:"commerceproduct",title:"Product",components:[{name:"Text",key:"name",focused:!0,fields:[{name:"Placeholder",value:"fill product name"},{name:"Label",value:"Name"}]},{name:"Photo",key:"thumb",fields:[{name:"Label",value:"Thumb"}]},{name:"Text",key:"description",fields:[{name:"Placeholder",value:"fill product description"},{name:"Label",value:"Description"}]},{name:"Number",key:"price",fields:[{name:"Placeholder",value:"fill product price"},{name:"Label",value:"Price"}]},{name:"Select",key:"priceType",fields:[{name:"Placeholder",value:"fill product price type"},{name:"Label",value:"Price Type"},{name:"Items",value:["kg","gm","piece","dozen","pack","slice","box","tray"]}]}]};var F=(()=>{let e=class e extends C{constructor(c){super({name:"commerceproduct"}),this._core=c,this.commerceproducts=this.getDocs(),this.commerceproductsByCommerce={},this.get(),this._core.on("wipe").subscribe(this.get.bind(this)),this.filteredDocuments(this.commerceproductsByCommerce,"commerce")}};e.\u0275fac=function(o){return new(o||e)(h(a))},e.\u0275prov=u({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();var p=(()=>{let e=class e{get rows(){return this.commerce?this._cps.commerceproductsByCommerce[this.commerce]||[]:this._cps.commerceproducts}constructor(c,o,t,s,l,M){this._cps=c,this._translate=o,this._alert=t,this._form=s,this._core=l,this._router=M,this.commerce=this._router.url.includes("/products/")?this._router.url.replace("/products/",""):"",this.columns=["name","price"],this.form=this._form.prepareForm(x),this.config={create:()=>{this._form.modal(this.form,{label:"Create",click:(i,n)=>{this.commerce&&(i.commerce=this.commerce),this._cps.create(i),n()}})},update:i=>{this._form.modal(this.form,[],i).then(n=>{console.log(n),console.log(i),this._core.copy(n,i),console.log(i),this._cps.update(i)})},delete:i=>{this._alert.question({text:this._translate.translate("Common.Are you sure you want to delete this commerceproduct?"),buttons:[{text:this._translate.translate("Common.No")},{text:this._translate.translate("Common.Yes"),callback:()=>{this._cps.delete(i)}}]})},headerButtons:[{icon:"playlist_add",click:this._bulkManagement(),class:"playlist"},{icon:"edit_note",click:this._bulkManagement(!1),class:"edit"}],buttons:[{icon:"cloud_download",click:i=>{this._form.modalUnique("commerceproduct","url",i)}}]}}_bulkManagement(c=!0){return()=>{this._form.modalDocs(c?[]:this.rows).then(o=>{if(c)for(let t of o)this.commerce&&(t.commerce=this.commerce),this._cps.create(t);else{for(let t of this.rows)o.find(s=>s._id===t._id)||this._cps.delete(t);for(let t of o){let s=this.rows.find(l=>l._id===t._id);s?(this._core.copy(t,s),this._cps.update(s)):(this.commerce&&(t.commerce=this.commerce),this._cps.create(t))}}})}}};e.\u0275fac=function(o){return new(o||e)(m(F),m(w),m(k),m(I),m(a),m(b))},e.\u0275cmp=f({type:e,selectors:[["ng-component"]],standalone:!1,decls:1,vars:3,consts:[["title","Products",3,"columns","config","rows"]],template:function(o,t){o&1&&y(0,"wtable",0),o&2&&v("columns",t.columns)("config",t.config)("rows",t.rows)},dependencies:[j],encapsulation:2});let r=e;return r})();var L=[{path:"",component:p},{path:":commerce_id",component:p}],J=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=_({type:e}),e.\u0275inj=d({imports:[g.forChild(L),P]});let r=e;return r})();export{J as CommerceproductModule};
